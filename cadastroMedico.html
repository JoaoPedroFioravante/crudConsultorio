<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Cadastro Médico</h1>
    <form id="cadastro">
        <p>Insira o nome do médico que deseja cadastrar</p>
        <input type="text" name="" id="nomeMedico" placeholder="nome do médico" required>
        <p>Insira o id da especialidade do médico</p>
        <select name="especialidade" id="idEspecialidade" required>
            <option value="1">cardiologista</option>
            <option value="2">oftalmologista</option>
            <option value="3">ortopedista</option>
            <option value="4">oncologista</option>
            <option value="5">cirurgia geral</option>
            <option value="6">anestesista</option>
            <option value="7">psiquiatra</option>
            <option value="8">cirurgião plástico</option>
        </select>
        <br>
        <button>enviar</button>
    </form>
    <script>
        let form = document.querySelector("#cadastro");
        form.addEventListener("submit", cadastrarMedico)
        async function cadastrarMedico(e) {
            e.preventDefault();
            let nome = document.querySelector("#nomeMedico").value;
            let especialidade = document.querySelector("#idEspecialidade").value;
            let optionsPost = {
            method: "POST",   
            body: JSON.stringify({
                nome: `${nome}`,
                idEspecialidade : `${especialidade}`,
            }),
            headers : {
                "Content-type": "application/json"
            }
        }
        try{let resposta = await fetch("https://ifsp.ddns.net/webservices/clinicaMedica/medicos", optionsPost);
            if(!resposta.ok){
                throw new Error("não foi possivel enviar os dados");
            }
        }
        catch(error){
            console.log(error.message);
        }
    }
    </script>
</body>
</html>